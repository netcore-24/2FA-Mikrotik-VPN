# –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã MikroTik 2FA VPN

## üìã –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ
1. [–û–±—â–∞—è —Å—Ö–µ–º–∞ —Ä–∞–±–æ—Ç—ã](#–æ–±—â–∞—è-—Å—Ö–µ–º–∞-—Ä–∞–±–æ—Ç—ã)
2. [–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π](#—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)
3. [–ü—Ä–∏–≤—è–∑–∫–∞ MikroTik –∞–∫–∫–∞—É–Ω—Ç–æ–≤](#–ø—Ä–∏–≤—è–∑–∫–∞-mikrotik-–∞–∫–∫–∞—É–Ω—Ç–æ–≤)
4. [–ü—Ä–æ—Ü–µ—Å—Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ VPN](#–ø—Ä–æ—Ü–µ—Å—Å-–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è-–∫-vpn)
5. [–í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å MikroTik](#–≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ-—Å-mikrotik)
6. [Telegram: –≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∏ —É—Å–ª–æ–≤–∏—è –ø–æ–∫–∞–∑–∞](docs/telegram_messages_flow.md)
7. [–í–∞–∂–Ω—ã–µ –Ω—é–∞–Ω—Å—ã](#–≤–∞–∂–Ω—ã–µ-–Ω—é–∞–Ω—Å—ã)

---

## üîÑ –û–±—â–∞—è —Å—Ö–µ–º–∞ —Ä–∞–±–æ—Ç—ã

### –ö—Ç–æ —Å–æ–∑–¥–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π?

**–í–ê–ñ–ù–û:** –°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ –º–æ–¥–µ–ª–∏ "–ø—Ä–∏–≤—è–∑–∫–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∞–∫–∫–∞—É–Ω—Ç–æ–≤":

1. **–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –°–ù–ê–ß–ê–õ–ê —Å–æ–∑–¥–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ MikroTik User Manager –≤—Ä—É—á–Ω—É—é**
2. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è –≤ —Å–∏—Å—Ç–µ–º–µ —á–µ—Ä–µ–∑ Telegram –±–æ—Ç–∞
3. –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –æ–¥–æ–±—Ä—è–µ—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
4. –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –ü–†–ò–í–Ø–ó–´–í–ê–ï–¢ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π MikroTik username –∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Å–∏—Å—Ç–µ–º—ã
5. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è –∫ VPN

**–°–∏—Å—Ç–µ–º–∞ –ù–ï –°–û–ó–î–ê–ï–¢ –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ MikroTik!** –û–Ω–∞ —Ç–æ–ª—å–∫–æ —É–ø—Ä–∞–≤–ª—è–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ (–≤–∫–ª—é—á–∞–µ—Ç/–≤—ã–∫–ª—é—á–∞–µ—Ç).

---

## üë§ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### –®–∞–≥ 1: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ Telegram –±–æ—Ç–∞

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí Telegram Bot ‚Üí Backend ‚Üí Database
```

**–ü—Ä–æ—Ü–µ—Å—Å:**

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç Telegram –±–æ—Ç–∞
2. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–º–∞–Ω–¥—É `/register`
3. –ë–æ—Ç –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –ø–æ–ª–Ω–æ–µ –∏–º—è (–§–ò–û)
4. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç –§–ò–û
5. –°–∏—Å—Ç–µ–º–∞ —Å–æ–∑–¥–∞–µ—Ç **RegistrationRequest** —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º `pending`
6. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ: "–í–∞—à–∞ –∑–∞—è–≤–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É"

**–§–∞–π–ª—ã:**
- `telegram_bot/handlers/registration.py` - –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- `backend/services/registration_service.py` - —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞

**–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:**
- –¢–∞–±–ª–∏—Ü–∞ `registration_requests`:
  - id (UUID)
  - telegram_id (ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è Telegram)
  - full_name (–≤–≤–µ–¥–µ–Ω–Ω–æ–µ –§–ò–û)
  - status = "pending"
  - requested_at (–¥–∞—Ç–∞ –∑–∞–ø—Ä–æ—Å–∞)

### –®–∞–≥ 2: –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –æ–¥–æ–±—Ä—è–µ—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é

```
Admin Web UI ‚Üí Backend API ‚Üí Database
```

**–ü—Ä–æ—Ü–µ—Å—Å:**

1. –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –≤—Ö–æ–¥–∏—Ç –≤ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
2. –ü–µ—Ä–µ—Ö–æ–¥–∏—Ç –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É "–ó–∞–ø—Ä–æ—Å—ã –Ω–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é"
3. –í–∏–¥–∏—Ç —Å–ø–∏—Å–æ–∫ –∑–∞–ø—Ä–æ—Å–æ–≤ —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º `pending`
4. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–∞–Ω–Ω—ã–µ (–§–ò–û, Telegram ID)
5. –ù–∞–∂–∏–º–∞–µ—Ç "–û–¥–æ–±—Ä–∏—Ç—å" –∏–ª–∏ "–û—Ç–∫–ª–æ–Ω–∏—Ç—å"

**–ü—Ä–∏ –æ–¥–æ–±—Ä–µ–Ω–∏–∏:**
- –°–æ–∑–¥–∞–µ—Ç—Å—è –∑–∞–ø–∏—Å—å –≤ —Ç–∞–±–ª–∏—Ü–µ `users`:
  - id (UUID)
  - telegram_id (–∏–∑ –∑–∞–ø—Ä–æ—Å–∞)
  - full_name (–∏–∑ –∑–∞–ø—Ä–æ—Å–∞)
  - status = "approved"
  - approved_by (ID –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞)
  - approved_at (–¥–∞—Ç–∞ –æ–¥–æ–±—Ä–µ–Ω–∏—è)
- –ó–∞–ø—Ä–æ—Å –≤ `registration_requests` –º–µ–Ω—è–µ—Ç —Å—Ç–∞—Ç—É—Å –Ω–∞ "approved"
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ Telegram: "–í–∞—à–∞ –∑–∞—è–≤–∫–∞ –æ–¥–æ–±—Ä–µ–Ω–∞!"

**–ü—Ä–∏ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–∏:**
- –ó–∞–ø—Ä–æ—Å –º–µ–Ω—è–µ—Ç —Å—Ç–∞—Ç—É—Å –Ω–∞ "rejected"
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –ø—Ä–∏—á–∏–Ω–∞ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ: "–í–∞—à–∞ –∑–∞—è–≤–∫–∞ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∞. –ü—Ä–∏—á–∏–Ω–∞: ..."

**–§–∞–π–ª—ã:**
- `frontend/src/pages/RegistrationRequestsPage.jsx` - —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–ø—Ä–æ—Å–æ–≤
- `backend/api/registration_requests.py` - API –¥–ª—è –æ–¥–æ–±—Ä–µ–Ω–∏—è/–æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è
- `backend/services/registration_service.py` - –ª–æ–≥–∏–∫–∞ –æ–¥–æ–±—Ä–µ–Ω–∏—è

---

## üîó –ü—Ä–∏–≤—è–∑–∫–∞ MikroTik –∞–∫–∫–∞—É–Ω—Ç–æ–≤

**–≠–¢–û –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–´–ô –®–ê–ì!** –ë–µ–∑ –ø—Ä–∏–≤—è–∑–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ —Å–º–æ–∂–µ—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ VPN.

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–µ —É—Å–ª–æ–≤–∏–µ

**–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –î–û–õ–ñ–ï–ù –í–†–£–ß–ù–£–Æ —Å–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ MikroTik User Manager:**

```
MikroTik Router ‚Üí User Manager ‚Üí Add User
```

–ù–∞–ø—Ä–∏–º–µ—Ä, —Å–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:
- `vpn_user_ivan`
- `vpn_user_maria_1`
- `vpn_user_maria_2`

### –ü—Ä–æ—Ü–µ—Å—Å –ø—Ä–∏–≤—è–∑–∫–∏

1. –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏"
2. –ù–∞—Ö–æ–¥–∏—Ç –æ–¥–æ–±—Ä–µ–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
3. –ù–∞–∂–∏–º–∞–µ—Ç "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å"
4. –í –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ –≤–∏–¥–∏—Ç –ø–æ–ª—è:
   - **MikroTik –∞–∫–∫–∞—É–Ω—Ç #1** (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
   - **MikroTik –∞–∫–∫–∞—É–Ω—Ç #2** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
5. –í–≤–æ–¥–∏—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π username –∏–∑ MikroTik User Manager
6. –°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:
   - –°—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ —Ç–∞–∫–æ–π username –Ω–∞ —Ä–æ—É—Ç–µ—Ä–µ?
   - –ù–µ –ø—Ä–∏–≤—è–∑–∞–Ω –ª–∏ –æ–Ω –∫ –¥—Ä—É–≥–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é?
   - –ù–µ –±–æ–ª—å—à–µ –ª–∏ 2 –∞–∫–∫–∞—É–Ω—Ç–æ–≤ –ø—Ä–∏–≤—è–∑—ã–≤–∞–µ—Ç—Å—è?
7. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –ø—Ä–∏–≤—è–∑–∫—É

**–ü—Ä–∏–º–µ—Ä:**
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å "–ú–∞—Ä–∏—è –ò–≤–∞–Ω–æ–≤–∞" (telegram_id: 123456789)
  ‚îú‚îÄ MikroTik –∞–∫–∫–∞—É–Ω—Ç #1: vpn_user_maria_1
  ‚îî‚îÄ MikroTik –∞–∫–∫–∞—É–Ω—Ç #2: vpn_user_maria_2
```

**–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:**
- –¢–∞–±–ª–∏—Ü–∞ `user_mikrotik_accounts`:
  - id (UUID)
  - user_id (UUID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å–∏—Å—Ç–µ–º—ã)
  - mikrotik_username (–∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ MikroTik)
  - is_active (–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø—Ä–∏–≤—è–∑–∫–∏)
  - created_at

**–í–∞–∂–Ω–æ:** –û–¥–∏–Ω MikroTik username –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–∏–≤—è–∑–∞–Ω —Ç–æ–ª—å–∫–æ –∫ –û–î–ù–û–ú–£ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Å–∏—Å—Ç–µ–º—ã.

**–§–∞–π–ª—ã:**
- `frontend/src/pages/UsersPage.jsx` - –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø—Ä–∏–≤—è–∑–∫–∏ (–º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ)
- `backend/api/users.py` - API –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–∏–≤—è–∑–æ–∫
- `backend/services/user_mikrotik_account_service.py` - –ª–æ–≥–∏–∫–∞ –ø—Ä–∏–≤—è–∑–∫–∏
- `backend/models/user_mikrotik_account.py` - –º–æ–¥–µ–ª—å –ë–î

---

## üîå –ü—Ä–æ—Ü–µ—Å—Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ VPN

### –®–∞–≥ 1: –ó–∞–ø—Ä–æ—Å VPN —á–µ—Ä–µ–∑ Telegram –±–æ—Ç–∞

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí Telegram Bot ‚Üí Backend ‚Üí MikroTik
```

**–ü—Ä–æ—Ü–µ—Å—Å:**

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–º–∞–Ω–¥—É `/request_vpn` –≤ Telegram –±–æ—Ç–µ
2. –°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:
   - –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å?
   - –û–¥–æ–±—Ä–µ–Ω –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å?
   - –ï—Å—Ç—å –ª–∏ –∞–∫—Ç–∏–≤–Ω—ã–µ —Å–µ—Å—Å–∏–∏?
   - –ü—Ä–∏–≤—è–∑–∞–Ω—ã –ª–∏ MikroTik –∞–∫–∫–∞—É–Ω—Ç—ã?

3. **–ï—Å–ª–∏ –ø—Ä–∏–≤—è–∑–∞–Ω 1 –∞–∫–∫–∞—É–Ω—Ç:**
   - –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç —ç—Ç–æ—Ç –∞–∫–∫–∞—É–Ω—Ç

4. **–ï—Å–ª–∏ –ø—Ä–∏–≤—è–∑–∞–Ω–æ 2 –∞–∫–∫–∞—É–Ω—Ç–∞:**
   - –ë–æ—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–Ω–æ–ø–∫–∏ –≤—ã–±–æ—Ä–∞:
     ```
     –£ –≤–∞—Å –ø—Ä–∏–≤—è–∑–∞–Ω–æ 2 MikroTik –∞–∫–∫–∞—É–Ω—Ç–∞.
     –í—ã–±–µ—Ä–∏—Ç–µ, –∫–∞–∫–æ–π –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:
     [vpn_user_maria_1]
     [vpn_user_maria_2]
     ```
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç –Ω—É–∂–Ω—ã–π

5. **–°–∏—Å—Ç–µ–º–∞ –ê–ö–¢–ò–í–ò–†–£–ï–¢ –≤—ã–±—Ä–∞–Ω–Ω—ã–π MikroTik username:**
   - –ü–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ MikroTik –ø–æ SSH –∏–ª–∏ REST API
   - –í—ã–ø–æ–ª–Ω—è–µ—Ç –∫–æ–º–∞–Ω–¥—É –≤–∫–ª—é—á–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
     ```
     /user-manager user set [find name="vpn_user_maria_1"] disabled=no
     ```
   - –ò–ª–∏ –¥–ª—è —Å—Ç–∞—Ä—ã—Ö –≤–µ—Ä—Å–∏–π RouterOS:
     ```
     /tool user-manager user set [find username="vpn_user_maria_1"] disabled=no
     ```
   - –ò–ª–∏ –¥–ª—è PPP (–µ—Å–ª–∏ User Manager –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω):
     ```
     /ppp secret set [find name="vpn_user_maria_1"] disabled=no
     ```

6. –°–æ–∑–¥–∞–µ—Ç—Å—è **VPN Session** –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö:
   - id (UUID)
   - user_id (ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å–∏—Å—Ç–µ–º—ã)
   - mikrotik_username (–≤—ã–±—Ä–∞–Ω–Ω—ã–π username)
   - status = "requested"
   - expires_at (—á–µ—Ä–µ–∑ 24 —á–∞—Å–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

7. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ:
   ```
   ‚úÖ MikroTik –∞–∫–∫–∞—É–Ω—Ç –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω: vpn_user_maria_1
   
   –¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ VPN —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–º–∏ —Å—Ä–µ–¥—Å—Ç–≤–∞–º–∏.
   –ü–æ—Å–ª–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –º—ã –æ–±–Ω–∞—Ä—É–∂–∏–º –µ–≥–æ –∏ –∑–∞–ø—Ä–æ—Å–∏–º –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ.
   ```

**–§–∞–π–ª—ã:**
- `telegram_bot/handlers/vpn.py` - –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã `/request_vpn`
- `backend/services/vpn_session_service.py` - —Å–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Å—Å–∏–∏
- `backend/services/mikrotik_service.py` - —Ñ—É–Ω–∫—Ü–∏—è `enable_user_manager_user()`

### –®–∞–≥ 2: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ VPN

**–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –°–¢–ê–ù–î–ê–†–¢–ù–´–ï —Å—Ä–µ–¥—Å—Ç–≤–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ VPN:**

- **Windows:** –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –°–µ—Ç—å ‚Üí VPN ‚Üí –î–æ–±–∞–≤–∏—Ç—å VPN
- **macOS:** –°–∏—Å—Ç–µ–º–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –°–µ—Ç—å ‚Üí VPN
- **Linux:** NetworkManager / OpenConnect
- **Android/iOS:** –ù–∞—Å—Ç—Ä–æ–π–∫–∏ VPN

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:**
- –°–µ—Ä–≤–µ—Ä: IP/–¥–æ–º–µ–Ω MikroTik —Ä–æ—É—Ç–µ—Ä–∞
- –¢–∏–ø VPN: L2TP/IPsec, PPTP, –∏–ª–∏ –¥—Ä—É–≥–æ–π (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ MikroTik)
- –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: `vpn_user_maria_1` (—Ç–æ—Ç, –∫–æ—Ç–æ—Ä—ã–π –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω)
- –ü–∞—Ä–æ–ª—å: –ø–∞—Ä–æ–ª—å –∏–∑ MikroTik User Manager

**–°–∏—Å—Ç–µ–º–∞ –ù–ï –ü–†–ï–î–û–°–¢–ê–í–õ–Ø–ï–¢ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ!** –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –¥–æ–ª–∂–µ–Ω —Å–æ–æ–±—â–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –ø–∞—Ä–æ–ª—å –æ—Ç–¥–µ–ª—å–Ω–æ (–±–µ–∑–æ–ø–∞—Å–Ω—ã–º —Å–ø–æ—Å–æ–±–æ–º).

### –®–∞–≥ 3: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —á–µ—Ä–µ–∑ **–ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–¥–∞—á**:

```
Scheduler ‚Üí MikroTik API ‚Üí Check Active Connections
```

**–ü—Ä–æ—Ü–µ—Å—Å (–∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç):**

1. –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è (APScheduler)
2. –°–∏—Å—Ç–µ–º–∞ –ø–æ–ª—É—á–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö VPN –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π —Å MikroTik:
   ```
   /user-manager active print detail
   ```
   –∏–ª–∏
   ```
   /ppp active print detail
   ```

3. –°—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç —Å —Å–µ—Å—Å–∏—è–º–∏ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º "requested"
4. –ï—Å–ª–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ ‚Üí –ø–µ—Ä–µ–≤–æ–¥–∏—Ç —Å–µ—Å—Å–∏—é –≤ —Å—Ç–∞—Ç—É—Å "connected"

**–§–∞–π–ª—ã:**
- `backend/services/scheduler_service.py` - –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫
- –§—É–Ω–∫—Ü–∏—è `check_vpn_connections()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π

### –®–∞–≥ 4: –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è (2FA)

**–ö–æ–≥–¥–∞ —Å–∏—Å—Ç–µ–º–∞ –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ Telegram:**

```
‚ùì –û–±–Ω–∞—Ä—É–∂–µ–Ω–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ VPN

–≠—Ç–æ –≤—ã –ø–æ–¥–∫–ª—é—á–∏–ª–∏—Å—å?
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: vpn_user_maria_1

[‚úÖ –î–∞, —ç—Ç–æ —è]  [‚ùå –ù–µ—Ç, –Ω–µ —è]
```

**–ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç "–î–∞":**
1. –°–µ—Å—Å–∏—è –ø–µ—Ä–µ–≤–æ–¥–∏—Ç—Å—è –≤ —Å—Ç–∞—Ç—É—Å "confirmed" ‚Üí "active"
2. –°–∏—Å—Ç–µ–º–∞ –≤–∫–ª—é—á–∞–µ—Ç firewall –ø—Ä–∞–≤–∏–ª–æ (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ):
   ```
   /ip firewall filter enable [find comment="vpn_user_maria_1"]
   ```
3. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è —Ç–∞–π–º–µ—Ä –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 6 —á–∞—Å–æ–≤)
4. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ:
   ```
   ‚úÖ VPN –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–æ!
   –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ –ø—Ä–æ–¥–ª–µ–Ω–∏–∏ —á–µ—Ä–µ–∑ 6 —á–∞—Å–æ–≤.
   ```

**–ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç "–ù–µ—Ç" –∏–ª–∏ –∏—Å—Ç–µ–∫–∞–µ—Ç —Ç–∞–π–º–∞—É—Ç (5 –º–∏–Ω—É—Ç):**
1. –°–µ—Å—Å–∏—è –ø–µ—Ä–µ–≤–æ–¥–∏—Ç—Å—è –≤ —Å—Ç–∞—Ç—É—Å "disconnected"
2. –°–∏—Å—Ç–µ–º–∞ –û–¢–ö–õ–Æ–ß–ê–ï–¢ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ MikroTik:
   ```
   /user-manager user set [find name="vpn_user_maria_1"] disabled=yes
   ```
3. –û—Ç–∫–ª—é—á–∞–µ—Ç firewall –ø—Ä–∞–≤–∏–ª–æ (–µ—Å–ª–∏ –±—ã–ª–æ –≤–∫–ª—é—á–µ–Ω–æ)
4. –†–∞–∑—Ä—ã–≤–∞–µ—Ç VPN —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
5. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ:
   ```
   ‚ùå VPN –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–æ –∏ —Ä–∞–∑–æ—Ä–≤–∞–Ω–æ.
   ```

### –®–∞–≥ 5: –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –∏ –ø—Ä–æ–¥–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏–∏

–ü–æ –∏—Å—Ç–µ—á–µ–Ω–∏–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 6 —á–∞—Å–æ–≤):

```
Scheduler ‚Üí Check Session Expiry ‚Üí Send Reminder
```

**–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ:**
```
‚è∞ –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ VPN

–í—ã –≤—Å—ë –µ—â—ë —Ä–∞–±–æ—Ç–∞–µ—Ç–µ –≤ VPN?
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: vpn_user_maria_1

[‚úÖ –î–∞, –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å]  [‚ùå –ù–µ—Ç, –æ—Ç–∫–ª—é—á–∏—Ç—å]
```

**–ï—Å–ª–∏ "–î–∞, –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å":**
- –°–µ—Å—Å–∏—è –ø—Ä–æ–¥–ª–µ–≤–∞–µ—Ç—Å—è –µ—â—ë –Ω–∞ 6 —á–∞—Å–æ–≤
- –¢–∞–π–º–µ—Ä —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è

**–ï—Å–ª–∏ "–ù–µ—Ç, –æ—Ç–∫–ª—é—á–∏—Ç—å" –∏–ª–∏ —Ç–∞–π–º–∞—É—Ç (10 –º–∏–Ω—É—Ç):**
- –°–µ—Å—Å–∏—è –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫–ª—é—á–∞–µ—Ç—Å—è –≤ MikroTik
- Firewall –ø—Ä–∞–≤–∏–ª–æ –æ—Ç–∫–ª—é—á–∞–µ—Ç—Å—è
- VPN —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Ä–∞–∑—Ä—ã–≤–∞–µ—Ç—Å—è

**–§–∞–π–ª—ã:**
- `backend/services/scheduler_service.py` - —Ñ—É–Ω–∫—Ü–∏—è `send_vpn_reminders()`
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –∫–∞–∂–¥—ã–π —á–∞—Å

---

## üîß –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å MikroTik

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –º–µ—Ç–æ–¥—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

1. **SSH —Å –ø–∞—Ä–æ–ª–µ–º** (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –Ω–∞—á–∞–ª–∞)
2. **SSH —Å –∫–ª—é—á–æ–º** (–±–æ–ª–µ–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ)
3. **REST API** (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω –Ω–∞ —Ä–æ—É—Ç–µ—Ä–µ)

### –ö–æ–º–∞–Ω–¥—ã, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Å–∏—Å—Ç–µ–º–∞

#### 1. –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

**RouterOS v7+ (User Manager):**
```
/user-manager user print detail
```

**RouterOS v6 (User Manager):**
```
/tool user-manager user print detail
```

**Fallback (PPP secrets):**
```
/ppp secret print detail
```

#### 2. –í–∫–ª—é—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (enable)

**RouterOS v7+:**
```
/user-manager user set [find name="vpn_user_maria_1"] disabled=no
```

**RouterOS v6:**
```
/tool user-manager user set [find username="vpn_user_maria_1"] disabled=no
```

**Fallback (PPP):**
```
/ppp secret set [find name="vpn_user_maria_1"] disabled=no
```

#### 3. –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (disable)

**RouterOS v7+:**
```
/user-manager user set [find name="vpn_user_maria_1"] disabled=yes
```

**RouterOS v6:**
```
/tool user-manager user set [find username="vpn_user_maria_1"] disabled=yes
```

**Fallback (PPP):**
```
/ppp secret set [find name="vpn_user_maria_1"] disabled=yes
```

#### 4. –ü–æ–ª—É—á–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω—ã—Ö VPN –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π

**User Manager:**
```
/user-manager active print detail
```

**PPP:**
```
/ppp active print detail
```

#### 5. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Firewall –ø—Ä–∞–≤–∏–ª–∞–º–∏

**–ü–æ–∏—Å–∫ –ø—Ä–∞–≤–∏–ª–∞ –ø–æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—é:**

‚ö†Ô∏è **–í–∞–∂–Ω–æ:** –≤ –ø—Ä–æ–µ–∫—Ç–µ ‚Äú–¥–æ–ø. –∑–∞—â–∏—Ç–∞‚Äù (firewall) –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é –ø—Ä–∞–≤–∏–ª –ø–æ **–Ω–∞–ª–∏—á–∏—é `2FA` –≤ `comment`**.  
–ï—Å–ª–∏ –≤ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –ø—Ä–∞–≤–∏–ª–∞ –Ω–µ—Ç —Å—Ç—Ä–æ–∫–∏ `2FA`, —Å–∏—Å—Ç–µ–º–∞ –Ω–µ —Å–º–æ–∂–µ—Ç –µ–≥–æ –Ω–∞–π—Ç–∏/–ø–æ–∫–∞–∑–∞—Ç—å –¥–ª—è –≤—ã–±–æ—Ä–∞.

–ü—Ä–∏–º–µ—Ä –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è: `2FA user vpn_user_ivan`

```
/ip firewall filter print detail where comment="vpn_user_maria_1"
```

**–í–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª–∞:**
```
/ip firewall filter enable [find comment="vpn_user_maria_1"]
```

**–û—Ç–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª–∞:**
```
/ip firewall filter disable [find comment="vpn_user_maria_1"]
```

### –ö–∞–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –ù–ï —É–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —Å–∏—Å—Ç–µ–º–æ–π

**–°–∏—Å—Ç–µ–º–∞ –ù–ï —Å–æ–∑–¥–∞–µ—Ç –∏ –ù–ï –∏–∑–º–µ–Ω—è–µ—Ç:**
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ User Manager (—Ç–æ–ª—å–∫–æ enable/disable)
- –ü–∞—Ä–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ü—Ä–æ—Ñ–∏–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- IP-–∞–¥—Ä–µ—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ü—Ä–∞–≤–∏–ª–∞ firewall (—Ç–æ–ª—å–∫–æ enable/disable —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö)

**–≠—Ç–æ –¥–æ–ª–∂–µ–Ω –¥–µ–ª–∞—Ç—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –í–†–£–ß–ù–£–Æ —á–µ—Ä–µ–∑ MikroTik WebFig/WinBox.**

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –Ω—é–∞–Ω—Å—ã

### 1. –ü–æ—Ä—è–¥–æ–∫ –¥–µ–π—Å—Ç–≤–∏–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

‚úÖ **–ü–†–ê–í–ò–õ–¨–ù–ê–Ø –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**

1. –°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ MikroTik User Manager (–≤—Ä—É—á–Ω—É—é)
2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å firewall –ø—Ä–∞–≤–∏–ª–∞ –≤ MikroTik (–≤—Ä—É—á–Ω—É—é, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
3. –î–æ–∂–¥–∞—Ç—å—Å—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ Telegram –±–æ—Ç–∞
4. –û–¥–æ–±—Ä–∏—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –≤ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ
5. –ü—Ä–∏–≤—è–∑–∞—Ç—å MikroTik username –∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Å–∏—Å—Ç–µ–º—ã
6. –°–æ–æ–±—â–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –ø–∞—Ä–æ–ª—å (–±–µ–∑–æ–ø–∞—Å–Ω—ã–º —Å–ø–æ—Å–æ–±–æ–º)

‚ùå **–ù–ï–ü–†–ê–í–ò–õ–¨–ù–û:**

1. –û–¥–æ–±—Ä–∏—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é
2. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—ã—Ç–∞–µ—Ç—Å—è –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è ‚Üí ‚ùå –û—à–∏–±–∫–∞! (–Ω–µ—Ç –ø—Ä–∏–≤—è–∑–∫–∏)

### 2. –ú–∞–∫—Å–∏–º—É–º 2 MikroTik –∞–∫–∫–∞—É–Ω—Ç–∞ –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

–≠—Ç–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–ª—è:
- –î–æ–º–∞—à–Ω–∏–π –∏ —Ä–∞–±–æ—á–∏–π VPN
- –û—Å–Ω–æ–≤–Ω–æ–π –∏ —Ä–µ–∑–µ—Ä–≤–Ω—ã–π –∫–∞–Ω–∞–ª
- –†–∞–∑–Ω—ã–µ IP-–∞–¥—Ä–µ—Å–∞ / –ø—Ä–æ—Ñ–∏–ª–∏

### 3. –û–¥–∏–Ω MikroTik username = –æ–¥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–∏—Å—Ç–µ–º—ã

–ù–µ–ª—å–∑—è –ø—Ä–∏–≤—è–∑–∞—Ç—å `vpn_user_ivan` –∫ –¥–≤—É–º —Ä–∞–∑–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º Telegram.

### 4. –ü–∞—Ä–æ–ª–∏ –ù–ï —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ —Å–∏—Å—Ç–µ–º–µ

–°–∏—Å—Ç–µ–º–∞ **–Ω–µ –∑–Ω–∞–µ—Ç** –ø–∞—Ä–æ–ª–∏ VPN –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π. –û–Ω–∞ —Ç–æ–ª—å–∫–æ –≤–∫–ª—é—á–∞–µ—Ç/–≤—ã–∫–ª—é—á–∞–µ—Ç –∏—Ö –≤ User Manager.

–ü–∞—Ä–æ–ª–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å:
- –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º –≤ MikroTik User Manager
- –ü–µ—Ä–µ–¥–∞–Ω—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –±–µ–∑–æ–ø–∞—Å–Ω—ã–º —Å–ø–æ—Å–æ–±–æ–º (–Ω–µ —á–µ—Ä–µ–∑ Telegram –±–æ—Ç–∞!)

### 5. –°–∏—Å—Ç–µ–º–∞ —Ç—Ä–µ–±—É–µ—Ç SSH/REST API –¥–æ—Å—Ç—É–ø –∫ MikroTik

–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –¥–æ–ª–∂–µ–Ω:
- –°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ —Ä–æ—É—Ç–µ—Ä–µ —Å –ø—Ä–∞–≤–∞–º–∏ admin
- –í–∫–ª—é—á–∏—Ç—å SSH —Å–ª—É–∂–±—É (`/ip service enable ssh`)
- –†–∞–∑—Ä–µ—à–∏—Ç—å –¥–æ—Å—Ç—É–ø —Å IP —Å–µ—Ä–≤–µ—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

### 6. Firewall –ø—Ä–∞–≤–∏–ª–∞ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã

–ï—Å–ª–∏ firewall –ø—Ä–∞–≤–∏–ª–∞ –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã:
- –°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å enable/disable –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- 2FA –≤—Å—ë —Ä–∞–≤–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç
- –ù–æ –¥–æ—Å—Ç—É–ø –Ω–µ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç—Å—è firewall

### 7. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏

–û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è **–Ω–µ –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ**:
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è)
- –ó–∞–¥–µ—Ä–∂–∫–∞ –¥–æ 5 –º–∏–Ω—É—Ç –º–µ–∂–¥—É –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ–º

---

## üìä –°—Ö–µ–º–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π VPN —Å–µ—Å—Å–∏–∏

```
REQUESTED ‚Üí –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–ø—Ä–æ—Å–∏–ª VPN, –∞–∫–∫–∞—É–Ω—Ç –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω –≤ MikroTik
    ‚Üì
CONNECTED ‚Üí —Å–∏—Å—Ç–µ–º–∞ –æ–±–Ω–∞—Ä—É–∂–∏–ª–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ, –∂–¥—ë—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è (5 –º–∏–Ω)
    ‚Üì
CONFIRMED ‚Üí –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª "–î–∞, —ç—Ç–æ —è"
    ‚Üì
ACTIVE ‚Üí —Å–µ—Å—Å–∏—è –∞–∫—Ç–∏–≤–Ω–∞, firewall –≤–∫–ª—é—á–µ–Ω, –∏–¥—ë—Ç —Ç–∞–π–º–µ—Ä –¥–æ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è
    ‚Üì
REMINDER_SENT ‚Üí –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ, –∂–¥—ë—Ç –æ—Ç–≤–µ—Ç–∞ (10 –º–∏–Ω)
    ‚Üì
ACTIVE (–ø—Ä–æ–¥–ª–µ–Ω–æ) –∏–ª–∏ DISCONNECTED / EXPIRED (–∑–∞–≤–µ—Ä—à–µ–Ω–æ)
```

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã

### 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ MikroTik

–í –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ:
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí MikroTik ‚Üí –¢–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

### 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π MikroTik

–í –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ:
- MikroTik ‚Üí –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏

–î–æ–ª–∂–Ω—ã –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏–∑ User Manager –∏–ª–∏ PPP secrets.

### 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∏–≤—è–∑–∫–∏

–í –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ:
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ ‚Üí —Å—Ç–æ–ª–±–µ—Ü "MikroTik –∞–∫–∫–∞—É–Ω—Ç—ã"

–î–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤–∏–¥–Ω—ã –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã–µ usernames.

### 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏

–í –∫–æ–Ω—Å–æ–ª–∏ —Å–µ—Ä–≤–µ—Ä–∞:
```bash
# Backend –ª–æ–≥–∏
tail -f /var/log/mikrotik-2fa-vpn/backend.log

# Telegram –±–æ—Ç –ª–æ–≥–∏
tail -f /var/log/mikrotik-2fa-vpn/telegram-bot.log
```

---

## üìù –ß–µ–∫–ª–∏—Å—Ç –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

- [ ] MikroTik –Ω–∞—Å—Ç—Ä–æ–µ–Ω (SSH –≤–∫–ª—é—á–µ–Ω, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–∑–¥–∞–Ω)
- [ ] Telegram –±–æ—Ç —Å–æ–∑–¥–∞–Ω (–ø–æ–ª—É—á–µ–Ω —Ç–æ–∫–µ–Ω)
- [ ] –°–∏—Å—Ç–µ–º–∞ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –∏ –∑–∞–ø—É—â–µ–Ω–∞
- [ ] –ü–µ—Ä–≤—ã–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä —Å–æ–∑–¥–∞–Ω
- [ ] –ú–∞—Å—Ç–µ—Ä –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–π–¥–µ–Ω
- [ ] –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ MikroTik —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–æ–∑–¥–∞–Ω—ã –≤ MikroTik User Manager –≤—Ä—É—á–Ω—É—é
- [ ] Firewall –ø—Ä–∞–≤–∏–ª–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- [ ] –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ –±–æ—Ç–∞ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞
- [ ] –û–¥–æ–±—Ä–µ–Ω–∏–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ü—Ä–∏–≤—è–∑–∫–∞ MikroTik –∞–∫–∫–∞—É–Ω—Ç–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ó–∞–ø—Ä–æ—Å VPN —á–µ—Ä–µ–∑ –±–æ—Ç–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π —Ä–∞–±–æ—Ç–∞–µ—Ç (–ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–ø—É—â–µ–Ω)
- [ ] –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –ø—Ä–∏—Ö–æ–¥—è—Ç –≤–æ–≤—Ä–µ–º—è

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2026-01-10
**–í–µ—Ä—Å–∏—è:** 1.0
